---
// YAML front matter
layout: 'default'
import { SITE_NAME } from "../consts";
import ToggleTheme from "./ToggleTheme";
import Navigation from "./Navigation.astro";
---

<script>
  // Parallax effect for header
  let ticking = false;
  
  function updateHeader() {
    const scrolled = window.scrollY;
    const header = document.querySelector('header');
    
    if (header) {
      const opacity = Math.max(0.8, 1 - scrolled / 500);
      header.style.backgroundColor = `rgba(248, 250, 252, ${opacity})`;
      
      if (document.documentElement.classList.contains('dark')) {
        header.style.backgroundColor = `rgba(15, 23, 42, ${opacity})`;
      }
    }
    
    ticking = false;
  }
  
  function requestTick() {
    if (!ticking) {
      window.requestAnimationFrame(updateHeader);
      ticking = true;
    }
  }
  
  window.addEventListener('scroll', requestTick);
  
  // Update on theme change
  const observer = new MutationObserver(updateHeader);
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
</script>

<header
  class="container mx-auto md:max-w-4xl p-4 fixed top-0 left-0 right-0 z-50 flex justify-between items-center backdrop-blur-md bg-slate-100/80 dark:bg-slate-900/80 shadow-lg border-b border-slate-200/20 dark:border-slate-700/20 transition-all duration-300"
>
  <a class="text-3xl text-fuchsia-600 dark:text-fuchsia-400 font-righteous hover:scale-105 transition-transform duration-300" href="/"
    >{SITE_NAME}</a
  >
  <Navigation />
  <ToggleTheme client:idle />
</header>